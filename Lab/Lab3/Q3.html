<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Lab3: OpenLayers â€” North Carolina Only (WMS topp:states)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v10.6.1/ol.css">
  <style>
    body { margin: 0; font-family: Arial, sans-serif; }
    header { padding: 12px; border-bottom: 1px solid #ccc; }
    #map { width: 100%; height: 90vh; }
  </style>
</head>
<body>
  <header>
    <h3>Lab3: Web-based Mapping Using OpenLayers</h3>
    <h4>Author: Ian Kresak</h4>
  </header>

  <div id="map" class="map"></div>

  <script src="https://cdn.jsdelivr.net/npm/ol@v10.6.1/dist/ol.js"></script>
  <script>
    // Bounding box for North Carolina (lon/lat, EPSG:4326)
    const ncExtent4326 = [-84.3219, 33.7529, -75.4001, 36.5880];
    // Convert to Web Mercator (EPSG:3857) for the default OpenLayers view
    const ncExtent3857 = ol.proj.transformExtent(ncExtent4326, 'EPSG:4326', 'EPSG:3857');

    // WMS overlay of topp:states filtered via CQL to only North Carolina
    // Using the public GeoServer demo endpoint
    const wmsNC = new ol.layer.Tile({
      source: new ol.source.TileWMS({
        url: 'https://ahocevar.com/geoserver/wms',
        params: {
          'LAYERS': 'topp:states',
          'TILED': true,
          // Show only North Carolina via CQL filter
          'CQL_FILTER': "STATE_NAME='North Carolina'"
        },
        serverType: 'geoserver',
        transition: 0
      })
    });

    // Create the map (no basemap; only the WMS overlay)
    const map = new ol.Map({
      target: 'map',
      layers: [wmsNC],
      view: new ol.View({
        projection: 'EPSG:3857',
        center: ol.extent.getCenter(ncExtent3857),
        zoom: 6,
        extent: ncExtent3857 // keep interaction within NC bounds
      })
    });

    // Fit to the NC extent for a nice initial view
    map.getView().fit(ncExtent3857, {
      size: map.getSize(),
      padding: [24, 24, 24, 24],
      duration: 600
    });
  </script>
</body>
</html>
